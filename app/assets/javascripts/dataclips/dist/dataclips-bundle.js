!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);var o=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=Object.assign({},t.schema);Object.keys(r).length&&Object.keys(t.schema).forEach((function(e){var n=t.schema[e].formatter;n&&(r.formatters[n]?i[e].formatter=r.formatters[n]:delete i[e].formatter)}));var a={};if(Object.keys(n).length&&(this.default_filter=n.default_filter,this.rowActions=n.rowActions,n.filters&&Object.keys(n.filters).forEach((function(e){a[e]=n.filters[e]}))),this.schema=i,this.container=document.getElementById(t.dom_id),this.identifier=t.identifier,this.url=t.url,this.name=t.name,this.time_zone=t.time_zone,this.filters=a,this.disable_seconds=t.disable_seconds,this.selectable=t.selectable,t.limit)this.limit=t.limit;else{var o=window.innerHeight-this.container.offsetTop;this.limit=Math.max(parseInt(o/30)-2,20)}}var t,r,i;return t=e,(r=[{key:"onChange",value:function(){}},{key:"refresh",value:function(){this.reactable.clearData(),this.fetch()}},{key:"getSelected",value:function(){return this.reactable.getSelectedData()}},{key:"fetch",value:function(){var e=this,t=this.url,r=this.schema,n=this.reactable,i=this.fetchDataInBatches,a=function(t){if("Service Unavailable"!==t&&"Internal Server Error"!==t)throw t;var r="de"===document.documentElement.lang?"Es sieht so aus, als würde der Server zu lange brauchen, um zu antworten. Dies kann entweder an einer schlechten Internetverbindung oder einem Fehler bei unseren Servern liegen. Bitte versuchen Sie es in beiden Fällen gleich noch einmal.":"Looks like the server is taking to long to respond, this can be caused by either poor connectivity or an error with our servers. In both cases please try again now.";confirm(r)&&setTimeout((function(){e.refresh()}),2500)};i(1,t,r).then((function e(o){o.data;var s=o.currentPage,l=o.totalCount;s<o.totalPages&&i(s+1,t,r).then(e).catch(a),n.addData(o.data,l)})).catch(a)}},{key:"fetchDataInBatches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i;return fetch(t+"?page="+e).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).then((function(t){return t.records.length?{data:t.records.map((function(e){var t=JSON.parse(e),a={};return Object.entries(r).forEach((function(e){var r=n(e,2),o=r[0],s=r[1],l=t[o];if(void 0===l)throw new TypeError("Dataclips: attribute '".concat(o,"' is undefined. Please verify schema."));if("datetime"===s.type&&null!==l){if(!i.test(l))throw new TypeError("Dataclips: ensure attribute '".concat(o,"' is valid ISO8601."));var c=l.match(i)[2];a[o]=c?l:"".concat(l,"Z")}else a[o]=l})),a})),currentPage:t.page,totalCount:t.total_count,totalPages:t.total_pages}:{data:[],currentPage:e,totalCount:0,totalPages:e}}))}},{key:"init",value:function(e){var t=this,r=this.container,n=this.name,i=this.schema,a=this.identifier,o=this.limit,s=this.time_zone,l=this.filters,c=this.default_filter,u=this.rowActions,f=this.fetch,h=this.disable_seconds,d=this.selectable,m=Reactable.init({container:r,schema:i,identifier:a,limit:o,searchPresets:l,actions:u,displayTimeZone:s,itemsChange:function(e){t.onChange(e)},disableSeconds:h,selectable:d,fileName:n,locale:document.querySelector("html").getAttribute("lang")||Intl.NumberFormat().resolvedOptions().locale,controls:{refresh:{onClick:function(e){e.stopPropagation(),m.clearData(),f.apply(t)},key:"refresh",label:"Refresh"}}});m.render(),this.reactable=m,c&&m.applySearchPreset(c),this.fetch(),e(this)}}])&&a(t.prototype,r),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.Dataclips=o}]);